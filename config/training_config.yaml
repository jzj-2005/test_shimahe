# YOLOv11-OBB 训练参数配置
# 使用方式: python tools/train_model.py --config config/training_config.yaml

# 任务类型: 必须为 obb（旋转框检测）
task: obb

# 预训练模型（DOTA 数据集预训练的 OBB 模型）
# 可选: yolo11n-obb.pt / yolo11s-obb.pt / yolo11m-obb.pt / yolo11l-obb.pt / yolo11x-obb.pt
model: yolo11x-obb.pt

# 数据集配置文件路径
data: data/dataset.yaml

# 训练轮数
epochs: 150

# 输入图像尺寸（航拍场景建议 >= 1280）
imgsz: 1280

# 批大小（根据 GPU 显存调整: 24GB → 8, 11GB → 4, 8GB → 2）
batch: 8

# --- 优化器参数 ---
optimizer: SGD
lr0: 0.01         # 初始学习率
lrf: 0.01         # 最终学习率系数 (lr_final = lr0 * lrf)
momentum: 0.937   # SGD 动量
weight_decay: 0.0005

# --- 学习率调度 ---
warmup_epochs: 3.0
warmup_momentum: 0.8
warmup_bias_lr: 0.1

# --- 早停 ---
patience: 30      # 验证指标无改善时的等待轮数

# --- 数据增强（OBB 训练增强至关重要）---
degrees: 180.0    # 旋转角度范围 [-180, 180]，OBB 任务需设大
translate: 0.1    # 平移范围
scale: 0.5        # 缩放范围
shear: 0.0        # 剪切角度
perspective: 0.0  # 透视变换
flipud: 0.5       # 上下翻转概率
fliplr: 0.5       # 左右翻转概率
mosaic: 1.0       # Mosaic 增强概率
mixup: 0.1        # MixUp 增强概率
copy_paste: 0.0   # Copy-Paste 增强概率

# --- 推理/设备 ---
device: 0         # GPU 设备编号（0 = 第一块 GPU, cpu = CPU 模式）
workers: 8        # 数据加载线程数
half: false       # 训练时不建议使用半精度

# --- 输出 ---
project: runs/obb
name: train
exist_ok: false   # 是否覆盖已有输出目录
save: true
save_period: -1   # 每隔 N 轮保存一次 checkpoint（-1 = 仅保存 best 和 last）
plots: true       # 生成训练曲线图

# --- 其他 ---
seed: 0
deterministic: true
verbose: true
